<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>VuChat</title>

<script src="https://cdn.jsdelivr.net/npm/firebase@9.6.1/firebase-app-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/firebase@9.6.1/firebase-firestore-compat.js"></script>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    margin:0;
}

#login{
    text-align:center;
    margin-top:100px;
}

#chat{
    display:none;
    height:100vh;
}

#sidebar{
    width:250px;
    background:#020617;
    height:100%;
    float:left;
    padding:10px;
}

#messages{
    margin-left:250px;
    height:90vh;
    overflow:auto;
    padding:10px;
}

input,button{
    padding:10px;
    border:none;
    border-radius:10px;
}

button{
    background:#22c55e;
    color:white;
}

.msg{
    background:#1e293b;
    padding:8px;
    margin:5px;
    border-radius:10px;
}
</style>
</head>

<body>

<div id="login">
<h1>ðŸ”¥ VuChat</h1>
<input id="name" placeholder="Nháº­p tÃªn...">
<button onclick="join()">VÃ o chat</button>
</div>

<div id="chat">
<div id="sidebar">
<h3>Online chat</h3>
<p>PhÃ²ng chung</p>
</div>

<div id="messages"></div>

<div style="position:fixed;bottom:10px;left:260px;width:70%">
<input id="msg" placeholder="Nháº¯n tin..." style="width:70%">
<button onclick="send()">Gá»­i</button>
</div>
</div>

<script>
const firebaseConfig = {
apiKey: "DÃN_KEY_FIREBASE",
authDomain: "xxx.firebaseapp.com",
projectId: "xxx",
storageBucket: "xxx.appspot.com",
messagingSenderId: "xxx",
appId: "xxx"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let username="";

function join(){
username=document.getElementById("name").value;
if(username=="") return alert("Nháº­p tÃªn");

document.getElementById("login").style.display="none";
document.getElementById("chat").style.display="block";

load();
}

function send(){
let text=document.getElementById("msg").value;
if(text=="") return;

db.collection("chat").add({
name:username,
msg:text,
time:Date.now()
});

document.getElementById("msg").value="";
}

function load(){
db.collection("chat").orderBy("time")
.onSnapshot(snap=>{
let html="";
snap.forEach(doc=>{
let d=doc.data();
html+=`<div class="msg"><b>${d.name}:</b> ${d.msg}</div>`;
});
document.getElementById("messages").innerHTML=html;
});
}
</script>

</body>
</html>
